<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>三角函数与树高测量 - 初中数学学习工具</title>
    <style>
        :root {
            --primary: #4CAF50;
            --secondary: #2196F3;
            --accent: #FF9800;
            --light: #f5f5f5;
            --dark: #333;
            --shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Comic Sans MS', 'Segoe UI', sans-serif;
        }
        
        body {
            background-color: #f0f7ff;
            color: var(--dark);
            line-height: 1.6;
            padding: 20px;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: var(--shadow);
        }
        
        h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
        }
        
        .container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .panel {
            flex: 1;
            min-width: 300px;
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: var(--shadow);
        }
        
        .knowledge-panel {
            background-color: #e8f5e9;
        }
        
        .practice-panel {
            background-color: #e3f2fd;
        }
        
        h2 {
            color: var(--primary);
            margin-bottom: 15px;
            border-bottom: 2px solid var(--accent);
            padding-bottom: 8px;
        }
        
        .triangle-diagram {
            width: 100%;
            height: 200px;
            background-color: #fff;
            border-radius: 10px;
            margin: 15px 0;
            position: relative;
            overflow: hidden;
        }
        
        .trig-function {
            background-color: white;
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        
        .trig-function h3 {
            color: var(--secondary);
            margin-bottom: 10px;
        }
        
        .formula {
            font-family: 'Courier New', monospace;
            background-color: #f5f5f5;
            padding: 8px;
            border-radius: 5px;
            margin: 10px 0;
            text-align: center;
        }
        
        .practice-area {
            text-align: center;
        }
        
        .params {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .param-box {
            background-color: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            min-width: 120px;
            margin: 10px;
        }
        
        .param-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary);
            margin: 10px 0;
        }
        
        .tree-diagram {
            width: 100%;
            height: 250px;
            background-color: #fff;
            border-radius: 10px;
            margin: 20px 0;
            position: relative;
            overflow: hidden;
        }
        
        .input-area {
            margin: 20px 0;
        }
        
        input[type="number"] {
            width: 150px;
            padding: 12px;
            border: 2px solid var(--secondary);
            border-radius: 8px;
            font-size: 1.1rem;
            text-align: center;
        }
        
        button {
            background-color: var(--accent);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
            margin: 5px;
            font-weight: bold;
        }
        
        button:hover {
            background-color: #f57c00;
            transform: translateY(-2px);
        }
        
        #refreshBtn {
            background-color: var(--secondary);
        }
        
        #refreshBtn:hover {
            background-color: #1976D2;
        }
        
        .result {
            margin-top: 20px;
            padding: 15px;
            border-radius: 10px;
            font-weight: bold;
            display: none;
        }
        
        .correct {
            background-color: #e8f5e9;
            color: #2e7d32;
            border: 2px solid #4CAF50;
        }
        
        .incorrect {
            background-color: #ffebee;
            color: #c62828;
            border: 2px solid #f44336;
        }
        
        footer {
            text-align: center;
            margin-top: 30px;
            color: #666;
            font-size: 0.9rem;
        }
        
        @media (max-width: 768px) {
            .container {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>三角函数与树高测量</h1>
        <p>通过有趣的互动学习三角函数，掌握测量树高的方法！</p>
    </header>
    
    <div class="container">
        <div class="panel knowledge-panel">
            <h2>三角函数知识</h2>
            <p>三角函数是直角三角形中边与角之间的关系。让我们通过一个直角三角形来理解：</p>
            
            <div class="triangle-diagram" id="triangleDiagram">
                <!-- 三角形图形将通过JavaScript绘制 -->
            </div>
            
            <div class="trig-function">
                <h3>正弦 (sin)</h3>
                <p>在直角三角形中，一个锐角的正弦值等于对边长度与斜边长度的比值。</p>
                <div class="formula">sin(θ) = 对边 / 斜边</div>
            </div>
            
            <div class="trig-function">
                <h3>余弦 (cos)</h3>
                <p>在直角三角形中，一个锐角的余弦值等于邻边长度与斜边长度的比值。</p>
                <div class="formula">cos(θ) = 邻边 / 斜边</div>
            </div>
            
            <div class="trig-function">
                <h3>正切 (tan)</h3>
                <p>在直角三角形中，一个锐角的正切值等于对边长度与邻边长度的比值。</p>
                <div class="formula">tan(θ) = 对边 / 邻边</div>
                <p>这个函数在测量树高时特别有用！</p>
            </div>
        </div>
        
        <div class="panel practice-panel">
            <h2>实践练习：测量树高</h2>
            <p>假设我们站在离树一定距离的地方，测量出了大树影子的长度和树顶的角度，就可以计算出树的高度！</p>
            
            <div class="params">
                <div class="param-box">
                    <h3>影长</h3>
                    <div class="param-value" id="distanceValue">-- 米</div>
                    <p>大树的影子长度</p>
                </div>
                
                <div class="param-box">
                    <h3>角度</h3>
                    <div class="param-value" id="angleValue">-- 度</div>
                    <p>仰望树顶的角度</p>
                </div>
                
                <div class="param-box">
                    <h3>树高</h3>
                    <div class="param-value" id="heightValue">-- 米</div>
                    <p>你需要计算的值</p>
                </div>
            </div>
            
            <div class="tree-diagram" id="treeDiagram">
                <!-- 树和测量图将通过JavaScript绘制 -->
            </div>
            
            <div class="practice-area">
                <button id="refreshBtn">刷新题目</button>
                
                <div class="input-area">
                    <label for="answerInput">请输入你计算的树高（米）：</label><br>
                    <label for="answerInput">保留至小数点后一位，√2≈1.414，√3≈1.732 <label><br>
                    <input type="number" id="answerInput" step="0.1" min="0" placeholder="输入答案">
                    <button id="checkBtn">验证答案</button>
                </div>
                
                <div class="result" id="resultMessage"></div>
            </div>
        </div>
    </div>
    
    <footer>
        <p>初中数学学习工具 | 三角函数应用 | 设计用于帮助初中生理解三角函数概念</p>
    </footer>

    <script>
        // 页面加载完成后执行
        document.addEventListener('DOMContentLoaded', function() {
            // 获取DOM元素
            const triangleDiagram = document.getElementById('triangleDiagram');
            const treeDiagram = document.getElementById('treeDiagram');
            const distanceValue = document.getElementById('distanceValue');
            const angleValue = document.getElementById('angleValue');
            const heightValue = document.getElementById('heightValue');
            const refreshBtn = document.getElementById('refreshBtn');
            const checkBtn = document.getElementById('checkBtn');
            const answerInput = document.getElementById('answerInput');
            const resultMessage = document.getElementById('resultMessage');
            
            // 初始化变量
            let currentDistance = 0;
            let currentAngle = 0;
            let correctHeight = 0;
            
            // 绘制三角形示意图
            function drawTriangleDiagram() {
                const canvas = document.createElement('canvas');
                canvas.width = triangleDiagram.clientWidth;
                canvas.height = triangleDiagram.clientHeight;
                triangleDiagram.innerHTML = '';
                triangleDiagram.appendChild(canvas);
                
                const ctx = canvas.getContext('2d');
                const width = canvas.width;
                const height = canvas.height;
                
                // 绘制直角三角形
                ctx.beginPath();
                ctx.moveTo(50, height - 50);
                ctx.lineTo(width - 50, height - 50);
                ctx.lineTo(width - 50, 50);
                ctx.closePath();
                ctx.strokeStyle = '#333';
                ctx.lineWidth = 3;
                ctx.stroke();
                
                // 标记角度
                ctx.beginPath();
                ctx.arc(70, height - 60, 30, 0, Math.PI / 7, false);
                ctx.strokeStyle = '#FF9800';
                ctx.lineWidth = 2;
                ctx.stroke();
                
                // 标记边
                ctx.font = '16px Arial';
                ctx.fillStyle = '#2196F3';
                ctx.fillText('对边', width - 100, height / 2);
                ctx.fillText('邻边', width / 2, height - 30);
                
                // 斜边
                ctx.save();
                ctx.translate(width - 300, height / 2);
                ctx.rotate(-Math.PI / 8);
                ctx.fillText('斜边', 0, 0);
                ctx.restore();
                
                // 标记角度θ
                ctx.fillStyle = '#FF9800';
                ctx.fillText('θ', 110, height - 50);
            }
            
            // 绘制树和测量图
            function drawTreeDiagram() {
                const canvas = document.createElement('canvas');
                canvas.width = treeDiagram.clientWidth;
                canvas.height = treeDiagram.clientHeight;
                treeDiagram.innerHTML = '';
                treeDiagram.appendChild(canvas);
                
                const ctx = canvas.getContext('2d');
                const width = canvas.width;
                const height = canvas.height;
                
                // 绘制地面
                ctx.beginPath();
                ctx.moveTo(0, height - 30);
                ctx.lineTo(width, height - 30);
                ctx.strokeStyle = '#795548';
                ctx.lineWidth = 4;
                ctx.stroke();
                
                // 绘制树
                ctx.fillStyle = '#5D4037';
                ctx.fillRect(width / 2 - 10, height - 150, 20, 120);
                
                ctx.fillStyle = '#4CAF50';
                ctx.beginPath();
                ctx.arc(width / 2, height - 160, 40, 0, Math.PI * 2);
                ctx.fill();
                
                // 绘制人
                ctx.fillStyle = '#2196F3';
                ctx.beginPath();
                ctx.arc(100, height - 50, 10, 0, Math.PI * 2);
                ctx.fill();
                
                ctx.beginPath();
                ctx.moveTo(100, height - 40);
                ctx.lineTo(100, height - 20);
                ctx.lineTo(90, height - 10);
                ctx.moveTo(100, height - 20);
                ctx.lineTo(110, height - 10);
                ctx.moveTo(100, height - 30);
                ctx.lineTo(90, height - 25);
                ctx.moveTo(100, height - 30);
                ctx.lineTo(110, height - 25);
                ctx.strokeStyle = '#2196F3';
                ctx.lineWidth = 2;
                ctx.stroke();
                
                // 绘制距离线
                ctx.beginPath();
                ctx.moveTo(110, height - 40);
                ctx.lineTo(width / 2 - 20, height - 40);
                ctx.setLineDash([5, 3]);
                ctx.strokeStyle = '#666';
                ctx.lineWidth = 1;
                ctx.stroke();
                ctx.setLineDash([]);
                
                ctx.fillStyle = '#666';
                ctx.fillText(currentDistance + '米', width / 3, height - 45);
                
                // 绘制角度线
                ctx.beginPath();
                ctx.moveTo(100, height - 50);
                ctx.lineTo(width / 2, height - 160);
                ctx.strokeStyle = '#FF9800';
                ctx.lineWidth = 2;
                ctx.stroke();
                
                // 绘制角度弧
                ctx.beginPath();
                ctx.arc(105, height - 80, 50, 0, Math.PI / 3.3, false);
                ctx.strokeStyle = '#FF9800';
                ctx.lineWidth = 2;
                ctx.stroke();
                
                ctx.fillStyle = '#FF9800';
                ctx.fillText(currentAngle + '°', 160, height - 55);
                
                // 标记树高
                ctx.beginPath();
                ctx.moveTo(width / 2 + 30, height - 150);
                ctx.lineTo(width / 2 + 30, height - 30);
                ctx.setLineDash([5, 3]);
                ctx.strokeStyle = '#4CAF50';
                ctx.lineWidth = 1;
                ctx.stroke();
                ctx.setLineDash([]);
                
                ctx.fillStyle = '#4CAF50';
                ctx.fillText('树高 = ?', width / 2 + 35, height - 90);
            }
            
            // 生成新题目
            function generateProblem() {
                // 随机生成距离（5-30米）
                currentDistance = Math.floor(Math.random() * 26) + 5;
                
                // 随机选择角度（30°, 45°, 60°）
                const angles = [30, 45, 60];
                currentAngle = angles[Math.floor(Math.random() * angles.length)];
                
                // 计算正确的树高（使用正切函数）
                correctHeight = currentDistance * Math.tan(currentAngle * Math.PI / 180);
                
                // 更新显示
                distanceValue.textContent = currentDistance + ' 米';
                angleValue.textContent = currentAngle + ' 度';
                heightValue.textContent = '? 米';
                
                // 重绘图
                drawTreeDiagram();
                
                // 清除结果和输入
                resultMessage.style.display = 'none';
                answerInput.value = '';
                answerInput.focus();
            }
            
            // 验证答案
            function checkAnswer() {
                const userAnswer = parseFloat(answerInput.value);
                
                if (isNaN(userAnswer)) {
                    alert('请输入有效的数字！');
                    return;
                }
                
                // 允许一定的误差范围（0.1米）
                const tolerance = 0.1;
                const isCorrect = Math.abs(userAnswer - correctHeight) <= tolerance;
                
                // 显示结果
                resultMessage.textContent = isCorrect 
                    ? `正确！树高确实是 ${correctHeight.toFixed(1)} 米。`
                    : `不正确。正确答案是 ${correctHeight.toFixed(1)} 米。再试一次！`;
                
                resultMessage.className = 'result ' + (isCorrect ? 'correct' : 'incorrect');
                resultMessage.style.display = 'block';
                
                // 更新树高显示
                heightValue.textContent = correctHeight.toFixed(1) + ' 米';
            }
            
            // 添加事件监听器
            refreshBtn.addEventListener('click', generateProblem);
            checkBtn.addEventListener('click', checkAnswer);
            
            // 初始绘制和生成题目
            drawTriangleDiagram();
            generateProblem();
            
            // 响应窗口大小变化
            window.addEventListener('resize', function() {
                drawTriangleDiagram();
                drawTreeDiagram();
            });
        });
    </script>
</body>
</html>